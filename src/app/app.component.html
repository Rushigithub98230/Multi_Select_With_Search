<mat-form-field appearance="outline" class="example-full-width">
  <mat-label>Select Patients</mat-label>
  
  <mat-select 
    [formControl]="patientControl" 
    [multiple]="true" 
    [compareWith]="compareById" 
    (selectionChange)="onSelectionChange($event)"
    (closed)="onDropDownClose()">

    <mat-select-trigger>
      {{ selectedPatientsDisplay() }}
    </mat-select-trigger>

    <!-- Search input inside the dropdown -->
    <!-- <mat-option> -->
      <mat-form-field appearance="fill">
        <mat-label>Search Patients</mat-label>
        <input type="text" matInput [(ngModel)]="searchTerm" (input)="filterPatients()" placeholder="Search by name">
      </mat-form-field>
    <!-- </mat-option> -->

    <!-- Display the filtered patient list -->
    <mat-option *ngFor="let patient of filteredPatients" [value]="patient">
      {{ patient.name }}
    </mat-option>
  </mat-select>
</mat-form-field>
